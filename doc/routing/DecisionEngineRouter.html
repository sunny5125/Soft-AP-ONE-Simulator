<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_74) on Tue Jun 14 22:03:26 IST 2016 -->
<title>DecisionEngineRouter</title>
<meta name="date" content="2016-06-14">
<link rel="stylesheet" type="text/css" href="../stylesheet.css" title="Style">
<script type="text/javascript" src="../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="DecisionEngineRouter";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../deprecated-list.html">Deprecated</a></li>
<li><a href="../index-all.html">Index</a></li>
<li><a href="../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../routing/ActiveRouter.html" title="class in routing"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../routing/DirectDeliveryRouter.html" title="class in routing"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../index.html?routing/DecisionEngineRouter.html" target="_top">Frames</a></li>
<li><a href="DecisionEngineRouter.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">routing</div>
<h2 title="Class DecisionEngineRouter" class="title">Class DecisionEngineRouter</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li><a href="../routing/MessageRouter.html" title="class in routing">routing.MessageRouter</a></li>
<li>
<ul class="inheritance">
<li><a href="../routing/ActiveRouter.html" title="class in routing">routing.ActiveRouter</a></li>
<li>
<ul class="inheritance">
<li>routing.DecisionEngineRouter</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">DecisionEngineRouter</span>
extends <a href="../routing/ActiveRouter.html" title="class in routing">ActiveRouter</a></pre>
<div class="block">This class overrides ActiveRouter in order to inject calls to a 
 DecisionEngine object where needed add extract as much code from the update()
 method as possible. 
 
 <strong>Forwarding Logic:</strong> 
 
 A DecisionEngineRouter maintains a List of Tuple<Message, Connection> in 
 support of a call to ActiveRouter.tryMessagesForConnected() in 
 DecisionEngineRouter.update(). Since update() is called so frequently, we'd 
 like as little computation done in it as possible; hence the List that gets
 updated when events happen. Four events cause the List to be updated: a new 
 message from this host, a new received message, a connection goes up, or a 
 connection goes down. On a new message (either from this host or received 
 from a peer), the collection of open connections is examined to see if the
 message should be forwarded along them. If so, a new Tuple is added to the
 List. When a connection goes up, the collection of messages is examined to 
 determine to determine if any should be sent to this new peer, adding a Tuple
 to the list if so. When a connection goes down, any Tuple in the list
 associated with that connection is removed from the List.
 
 <strong>Decision Engines</strong>
 
 Most (if not all) routing decision making is provided by a 
 RoutingDecisionEngine object. The DecisionEngine Interface defines methods 
 that enact computation and return decisions as follows:
 
 <ul>
   <li>In createNewMessage(), a call to RoutingDecisionEngine.newMessage() is 
         made. A return value of true indicates that the message should be added to
         the message store for routing. A false value indicates the message should
   be discarded.
   </li>
   <li>changedConnection() indicates either a connection went up or down. The
   appropriate connectionUp() or connectionDown() method is called on the
   RoutingDecisionEngine object. Also, on connection up events, this first
   peer to call changedConnection() will also call
   RoutingDecisionEngine.doExchangeForNewConnection() so that the two 
   decision engine objects can simultaneously exchange information and update 
   their routing tables (without fear of this method being called a second
   time).
   </li>
   <li>Starting a Message transfer, a protocol first asks the neighboring peer
   if it's okay to send the Message. If the peer indicates that the Message is
   OLD or DELIVERED, call to RoutingDecisionEngine.shouldDeleteOldMessage() is
   made to determine if the Message should be removed from the message store.
   <em>Note: if tombstones are enabled or deleteDelivered is disabled, the 
   Message will be deleted and no call to this method will be made.</em>
   </li>
   <li>When a message is received (in messageTransferred), a call to 
   RoutingDecisionEngine.isFinalDest() to determine if the receiving (this) 
   host is an intended recipient of the Message. Next, a call to 
   RoutingDecisionEngine.shouldSaveReceivedMessage() is made to determine if
   the new message should be stored and attempts to forward it on should be
   made. If so, the set of Connections is examined for transfer opportunities
   as described above.
   </li>
   <li> When a message is sent (in transferDone()), a call to 
   RoutingDecisionEngine.shouldDeleteSentMessage() is made to ask if the 
   departed Message now residing on a peer should be removed from the message
   store.
   </li>
 </ul>
 
 <strong>Tombstones</strong>
 
 The ONE has the the deleteDelivered option that lets a host delete a message
 if it comes in contact with the message's destination. More aggressive 
 approach lets a host remember that a given message was already delivered by
 storing the message ID in a list of delivered messages (which is called the
 tombstone list here). Whenever any node tries to send a message to a host 
 that has a tombstone for the message, the sending node receives the 
 tombstone.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../routing/DecisionEngineRouter.html#CONNECTION_STATE_SETTING">CONNECTION_STATE_SETTING</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected java.util.Map&lt;<a href="../core/Connection.html" title="class in core">Connection</a>,java.lang.Integer&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../routing/DecisionEngineRouter.html#conStates">conStates</a></span></code>
<div class="block">Used to save state machine when new connections are made.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="../routing/RoutingDecisionEngine.html" title="interface in routing">RoutingDecisionEngine</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../routing/DecisionEngineRouter.html#decider">decider</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../routing/DecisionEngineRouter.html#ENGINE_SETTING">ENGINE_SETTING</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected java.util.List&lt;<a href="../core/Tuple.html" title="class in core">Tuple</a>&lt;<a href="../core/Message.html" title="class in core">Message</a>,<a href="../core/Connection.html" title="class in core">Connection</a>&gt;&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../routing/DecisionEngineRouter.html#outgoingMessages">outgoingMessages</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../routing/DecisionEngineRouter.html#PUBSUB_NS">PUBSUB_NS</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../routing/DecisionEngineRouter.html#TOMBSTONE_SETTING">TOMBSTONE_SETTING</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected java.util.Set&lt;java.lang.String&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../routing/DecisionEngineRouter.html#tombstones">tombstones</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../routing/DecisionEngineRouter.html#tombstoning">tombstoning</a></span></code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="fields.inherited.from.class.routing.ActiveRouter">
<!--   -->
</a>
<h3>Fields inherited from class&nbsp;routing.<a href="../routing/ActiveRouter.html" title="class in routing">ActiveRouter</a></h3>
<code><a href="../routing/ActiveRouter.html#DELETE_DELIVERED_S">DELETE_DELIVERED_S</a>, <a href="../routing/ActiveRouter.html#deleteDelivered">deleteDelivered</a>, <a href="../routing/ActiveRouter.html#RESPONSE_PREFIX">RESPONSE_PREFIX</a>, <a href="../routing/ActiveRouter.html#sendingConnections">sendingConnections</a>, <a href="../routing/ActiveRouter.html#TTL_CHECK_INTERVAL">TTL_CHECK_INTERVAL</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="fields.inherited.from.class.routing.MessageRouter">
<!--   -->
</a>
<h3>Fields inherited from class&nbsp;routing.<a href="../routing/MessageRouter.html" title="class in routing">MessageRouter</a></h3>
<code><a href="../routing/MessageRouter.html#B_SIZE_S">B_SIZE_S</a>, <a href="../routing/MessageRouter.html#deliveredMessages">deliveredMessages</a>, <a href="../routing/MessageRouter.html#DENIED_ALREADY_IN_VR">DENIED_ALREADY_IN_VR</a>, <a href="../routing/MessageRouter.html#DENIED_CHECKIN">DENIED_CHECKIN</a>, <a href="../routing/MessageRouter.html#DENIED_DELIVERED">DENIED_DELIVERED</a>, <a href="../routing/MessageRouter.html#DENIED_NO_SPACE">DENIED_NO_SPACE</a>, <a href="../routing/MessageRouter.html#DENIED_OLD">DENIED_OLD</a>, <a href="../routing/MessageRouter.html#DENIED_TTL">DENIED_TTL</a>, <a href="../routing/MessageRouter.html#DENIED_UNSPECIFIED">DENIED_UNSPECIFIED</a>, <a href="../routing/MessageRouter.html#mListeners">mListeners</a>, <a href="../routing/MessageRouter.html#MSG_TTL_S">MSG_TTL_S</a>, <a href="../routing/MessageRouter.html#msgTtl">msgTtl</a>, <a href="../routing/MessageRouter.html#Q_MODE_FIFO">Q_MODE_FIFO</a>, <a href="../routing/MessageRouter.html#Q_MODE_RANDOM">Q_MODE_RANDOM</a>, <a href="../routing/MessageRouter.html#RCV_OK">RCV_OK</a>, <a href="../routing/MessageRouter.html#SEND_QUEUE_MODE_S">SEND_QUEUE_MODE_S</a>, <a href="../routing/MessageRouter.html#TRY_LATER_BUSY">TRY_LATER_BUSY</a></code></li>
</ul>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../routing/DecisionEngineRouter.html#DecisionEngineRouter-routing.DecisionEngineRouter-">DecisionEngineRouter</a></span>(<a href="../routing/DecisionEngineRouter.html" title="class in routing">DecisionEngineRouter</a>&nbsp;r)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../routing/DecisionEngineRouter.html#DecisionEngineRouter-core.Settings-">DecisionEngineRouter</a></span>(<a href="../core/Settings.html" title="class in core">Settings</a>&nbsp;s)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../routing/DecisionEngineRouter.html#connectionDown-core.Connection-">connectionDown</a></span>(<a href="../core/Connection.html" title="class in core">Connection</a>&nbsp;con)</code>&nbsp;</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../routing/DecisionEngineRouter.html#connectionUp-core.Connection-">connectionUp</a></span>(<a href="../core/Connection.html" title="class in core">Connection</a>&nbsp;con)</code>&nbsp;</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../routing/DecisionEngineRouter.html#createNewMessage-core.Message-">createNewMessage</a></span>(<a href="../core/Message.html" title="class in core">Message</a>&nbsp;m)</code>
<div class="block">Creates a new message to the router.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../routing/DecisionEngineRouter.html#didExchange-core.Connection-">didExchange</a></span>(<a href="../core/Connection.html" title="class in core">Connection</a>&nbsp;con)</code>
<div class="block">Called by a peer DecisionEngineRouter to indicated that it already 
 performed an information exchange for the given connection.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../routing/DecisionEngineRouter.html#doExchange-core.Connection-core.DTNHost-">doExchange</a></span>(<a href="../core/Connection.html" title="class in core">Connection</a>&nbsp;con,
          <a href="../core/DTNHost.html" title="class in core">DTNHost</a>&nbsp;otherHost)</code>&nbsp;</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../routing/DecisionEngineRouter.html#findConnectionsForNewMessage-core.Message-core.DTNHost-">findConnectionsForNewMessage</a></span>(<a href="../core/Message.html" title="class in core">Message</a>&nbsp;m,
                            <a href="../core/DTNHost.html" title="class in core">DTNHost</a>&nbsp;from)</code>&nbsp;</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code><a href="../routing/RoutingDecisionEngine.html" title="interface in routing">RoutingDecisionEngine</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../routing/DecisionEngineRouter.html#getDecisionEngine--">getDecisionEngine</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code><a href="../core/Message.html" title="class in core">Message</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../routing/DecisionEngineRouter.html#messageTransferred-java.lang.String-core.DTNHost-">messageTransferred</a></span>(java.lang.String&nbsp;id,
                  <a href="../core/DTNHost.html" title="class in core">DTNHost</a>&nbsp;from)</code>
<div class="block">This method should be called (on the receiving host) after a message
 was successfully transferred.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../routing/DecisionEngineRouter.html#receiveMessage-core.Message-core.DTNHost-">receiveMessage</a></span>(<a href="../core/Message.html" title="class in core">Message</a>&nbsp;m,
              <a href="../core/DTNHost.html" title="class in core">DTNHost</a>&nbsp;from)</code>
<div class="block">Try to start receiving a message from another host.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code><a href="../routing/MessageRouter.html" title="class in routing">MessageRouter</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../routing/DecisionEngineRouter.html#replicate--">replicate</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../routing/DecisionEngineRouter.html#shouldNotifyPeer-core.Connection-">shouldNotifyPeer</a></span>(<a href="../core/Connection.html" title="class in core">Connection</a>&nbsp;con)</code>&nbsp;</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>protected int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../routing/DecisionEngineRouter.html#startTransfer-core.Message-core.Connection-">startTransfer</a></span>(<a href="../core/Message.html" title="class in core">Message</a>&nbsp;m,
             <a href="../core/Connection.html" title="class in core">Connection</a>&nbsp;con)</code>
<div class="block">Tries to start a transfer of message using a connection.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../routing/DecisionEngineRouter.html#transferDone-core.Connection-">transferDone</a></span>(<a href="../core/Connection.html" title="class in core">Connection</a>&nbsp;con)</code>
<div class="block">Method is called just before a transfer is finalized 
 at <a href="../routing/ActiveRouter.html#update--"><code>ActiveRouter.update()</code></a>.</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../routing/DecisionEngineRouter.html#update--">update</a></span>()</code>
<div class="block">Checks out all sending connections to finalize the ready ones 
 and abort those whose connection went down.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.routing.ActiveRouter">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;routing.<a href="../routing/ActiveRouter.html" title="class in routing">ActiveRouter</a></h3>
<code><a href="../routing/ActiveRouter.html#ackMessage-core.Message-core.DTNHost-">ackMessage</a>, <a href="../routing/ActiveRouter.html#addToSendingConnections-core.Connection-">addToSendingConnections</a>, <a href="../routing/ActiveRouter.html#canStartTransfer--">canStartTransfer</a>, <a href="../routing/ActiveRouter.html#changedConnection-core.Connection-">changedConnection</a>, <a href="../routing/ActiveRouter.html#checkReceiving-core.Message-">checkReceiving</a>, <a href="../routing/ActiveRouter.html#dropExpiredMessages--">dropExpiredMessages</a>, <a href="../routing/ActiveRouter.html#exchangeDeliverableMessages--">exchangeDeliverableMessages</a>, <a href="../routing/ActiveRouter.html#getConnectionCount--">getConnectionCount</a>, <a href="../routing/ActiveRouter.html#getMessagesForConnected--">getMessagesForConnected</a>, <a href="../routing/ActiveRouter.html#getOldestMessage-boolean-">getOldestMessage</a>, <a href="../routing/ActiveRouter.html#initialize-core.DTNHost-java.util.List-">initialize</a>, <a href="../routing/ActiveRouter.html#isSending-java.lang.String-">isSending</a>, <a href="../routing/ActiveRouter.html#isTransferring--">isTransferring</a>, <a href="../routing/ActiveRouter.html#makeRoomForMessage-int-">makeRoomForMessage</a>, <a href="../routing/ActiveRouter.html#makeRoomForNewMessage-int-">makeRoomForNewMessage</a>, <a href="../routing/ActiveRouter.html#requestDeliverableMessages-core.Connection-">requestDeliverableMessages</a>, <a href="../routing/ActiveRouter.html#shuffleMessages-java.util.List-">shuffleMessages</a>, <a href="../routing/ActiveRouter.html#transferAborted-core.Connection-">transferAborted</a>, <a href="../routing/ActiveRouter.html#tryAllMessages-core.Connection-java.util.List-">tryAllMessages</a>, <a href="../routing/ActiveRouter.html#tryAllMessagesToAllConnections--">tryAllMessagesToAllConnections</a>, <a href="../routing/ActiveRouter.html#tryMessagesForConnected-java.util.List-">tryMessagesForConnected</a>, <a href="../routing/ActiveRouter.html#tryMessagesToAllConnections-java.util.List-">tryMessagesToAllConnections</a>, <a href="../routing/ActiveRouter.html#tryMessagesToConnections-java.util.List-java.util.List-">tryMessagesToConnections</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.routing.MessageRouter">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;routing.<a href="../routing/MessageRouter.html" title="class in routing">MessageRouter</a></h3>
<code><a href="../routing/MessageRouter.html#addApplication-core.Application-">addApplication</a>, <a href="../routing/MessageRouter.html#addToMessages-core.Message-boolean-">addToMessages</a>, <a href="../routing/MessageRouter.html#compareByQueueMode-core.Message-core.Message-">compareByQueueMode</a>, <a href="../routing/MessageRouter.html#deleteMessage-java.lang.String-boolean-">deleteMessage</a>, <a href="../routing/MessageRouter.html#getApplications-java.lang.String-">getApplications</a>, <a href="../routing/MessageRouter.html#getBufferSize--">getBufferSize</a>, <a href="../routing/MessageRouter.html#getFreeBufferSize--">getFreeBufferSize</a>, <a href="../routing/MessageRouter.html#getHost--">getHost</a>, <a href="../routing/MessageRouter.html#getMessage-java.lang.String-">getMessage</a>, <a href="../routing/MessageRouter.html#getMessageCollection--">getMessageCollection</a>, <a href="../routing/MessageRouter.html#getNrofMessages--">getNrofMessages</a>, <a href="../routing/MessageRouter.html#getRoutingInfo--">getRoutingInfo</a>, <a href="../routing/MessageRouter.html#hasMessage-java.lang.String-">hasMessage</a>, <a href="../routing/MessageRouter.html#isDeliveredMessage-core.Message-">isDeliveredMessage</a>, <a href="../routing/MessageRouter.html#isIncomingMessage-java.lang.String-">isIncomingMessage</a>, <a href="../routing/MessageRouter.html#messageAborted-java.lang.String-core.DTNHost-int-">messageAborted</a>, <a href="../routing/MessageRouter.html#putToIncomingBuffer-core.Message-core.DTNHost-">putToIncomingBuffer</a>, <a href="../routing/MessageRouter.html#removeFromIncomingBuffer-java.lang.String-core.DTNHost-">removeFromIncomingBuffer</a>, <a href="../routing/MessageRouter.html#removeFromMessages-java.lang.String-">removeFromMessages</a>, <a href="../routing/MessageRouter.html#sendMessage-java.lang.String-core.DTNHost-">sendMessage</a>, <a href="../routing/MessageRouter.html#sortByQueueMode-java.util.List-">sortByQueueMode</a>, <a href="../routing/MessageRouter.html#toString--">toString</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="PUBSUB_NS">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>PUBSUB_NS</h4>
<pre>public static final&nbsp;java.lang.String PUBSUB_NS</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../constant-values.html#routing.DecisionEngineRouter.PUBSUB_NS">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="ENGINE_SETTING">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ENGINE_SETTING</h4>
<pre>public static final&nbsp;java.lang.String ENGINE_SETTING</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../constant-values.html#routing.DecisionEngineRouter.ENGINE_SETTING">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="TOMBSTONE_SETTING">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>TOMBSTONE_SETTING</h4>
<pre>public static final&nbsp;java.lang.String TOMBSTONE_SETTING</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../constant-values.html#routing.DecisionEngineRouter.TOMBSTONE_SETTING">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="CONNECTION_STATE_SETTING">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>CONNECTION_STATE_SETTING</h4>
<pre>public static final&nbsp;java.lang.String CONNECTION_STATE_SETTING</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../constant-values.html#routing.DecisionEngineRouter.CONNECTION_STATE_SETTING">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="tombstoning">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>tombstoning</h4>
<pre>protected&nbsp;boolean tombstoning</pre>
</li>
</ul>
<a name="decider">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>decider</h4>
<pre>protected&nbsp;<a href="../routing/RoutingDecisionEngine.html" title="interface in routing">RoutingDecisionEngine</a> decider</pre>
</li>
</ul>
<a name="outgoingMessages">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>outgoingMessages</h4>
<pre>protected&nbsp;java.util.List&lt;<a href="../core/Tuple.html" title="class in core">Tuple</a>&lt;<a href="../core/Message.html" title="class in core">Message</a>,<a href="../core/Connection.html" title="class in core">Connection</a>&gt;&gt; outgoingMessages</pre>
</li>
</ul>
<a name="tombstones">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>tombstones</h4>
<pre>protected&nbsp;java.util.Set&lt;java.lang.String&gt; tombstones</pre>
</li>
</ul>
<a name="conStates">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>conStates</h4>
<pre>protected&nbsp;java.util.Map&lt;<a href="../core/Connection.html" title="class in core">Connection</a>,java.lang.Integer&gt; conStates</pre>
<div class="block">Used to save state machine when new connections are made. See comment in
 changedConnection()</div>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="DecisionEngineRouter-core.Settings-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DecisionEngineRouter</h4>
<pre>public&nbsp;DecisionEngineRouter(<a href="../core/Settings.html" title="class in core">Settings</a>&nbsp;s)</pre>
</li>
</ul>
<a name="DecisionEngineRouter-routing.DecisionEngineRouter-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>DecisionEngineRouter</h4>
<pre>public&nbsp;DecisionEngineRouter(<a href="../routing/DecisionEngineRouter.html" title="class in routing">DecisionEngineRouter</a>&nbsp;r)</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="replicate--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>replicate</h4>
<pre>public&nbsp;<a href="../routing/MessageRouter.html" title="class in routing">MessageRouter</a>&nbsp;replicate()</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../routing/MessageRouter.html#replicate--">replicate</a></code>&nbsp;in class&nbsp;<code><a href="../routing/MessageRouter.html" title="class in routing">MessageRouter</a></code></dd>
</dl>
</li>
</ul>
<a name="createNewMessage-core.Message-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createNewMessage</h4>
<pre>public&nbsp;boolean&nbsp;createNewMessage(<a href="../core/Message.html" title="class in core">Message</a>&nbsp;m)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from class:&nbsp;<code><a href="../routing/MessageRouter.html#createNewMessage-core.Message-">MessageRouter</a></code></span></div>
<div class="block">Creates a new message to the router.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="../routing/ActiveRouter.html#createNewMessage-core.Message-">createNewMessage</a></code>&nbsp;in class&nbsp;<code><a href="../routing/ActiveRouter.html" title="class in routing">ActiveRouter</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>m</code> - The message to create</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>True if the creation succeeded, false if not (e.g.
 the message was too big for the buffer)</dd>
</dl>
</li>
</ul>
<a name="connectionUp-core.Connection-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>connectionUp</h4>
<pre>public&nbsp;void&nbsp;connectionUp(<a href="../core/Connection.html" title="class in core">Connection</a>&nbsp;con)</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="../routing/ActiveRouter.html#connectionUp-core.Connection-">connectionUp</a></code>&nbsp;in class&nbsp;<code><a href="../routing/ActiveRouter.html" title="class in routing">ActiveRouter</a></code></dd>
</dl>
</li>
</ul>
<a name="connectionDown-core.Connection-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>connectionDown</h4>
<pre>public&nbsp;void&nbsp;connectionDown(<a href="../core/Connection.html" title="class in core">Connection</a>&nbsp;con)</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="../routing/ActiveRouter.html#connectionDown-core.Connection-">connectionDown</a></code>&nbsp;in class&nbsp;<code><a href="../routing/ActiveRouter.html" title="class in routing">ActiveRouter</a></code></dd>
</dl>
</li>
</ul>
<a name="doExchange-core.Connection-core.DTNHost-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>doExchange</h4>
<pre>protected&nbsp;void&nbsp;doExchange(<a href="../core/Connection.html" title="class in core">Connection</a>&nbsp;con,
                          <a href="../core/DTNHost.html" title="class in core">DTNHost</a>&nbsp;otherHost)</pre>
</li>
</ul>
<a name="didExchange-core.Connection-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>didExchange</h4>
<pre>protected&nbsp;void&nbsp;didExchange(<a href="../core/Connection.html" title="class in core">Connection</a>&nbsp;con)</pre>
<div class="block">Called by a peer DecisionEngineRouter to indicated that it already 
 performed an information exchange for the given connection.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>con</code> - Connection on which the exchange was performed</dd>
</dl>
</li>
</ul>
<a name="startTransfer-core.Message-core.Connection-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>startTransfer</h4>
<pre>protected&nbsp;int&nbsp;startTransfer(<a href="../core/Message.html" title="class in core">Message</a>&nbsp;m,
                            <a href="../core/Connection.html" title="class in core">Connection</a>&nbsp;con)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from class:&nbsp;<code><a href="../routing/ActiveRouter.html#startTransfer-core.Message-core.Connection-">ActiveRouter</a></code></span></div>
<div class="block">Tries to start a transfer of message using a connection. Is starting
 succeeds, the connection is added to the watch list of active connections</div>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="../routing/ActiveRouter.html#startTransfer-core.Message-core.Connection-">startTransfer</a></code>&nbsp;in class&nbsp;<code><a href="../routing/ActiveRouter.html" title="class in routing">ActiveRouter</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>m</code> - The message to transfer</dd>
<dd><code>con</code> - The connection to use</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the value returned by 
 <a href="../core/Connection.html#startTransfer-core.DTNHost-core.Message-"><code>Connection.startTransfer(DTNHost, Message)</code></a></dd>
</dl>
</li>
</ul>
<a name="receiveMessage-core.Message-core.DTNHost-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>receiveMessage</h4>
<pre>public&nbsp;int&nbsp;receiveMessage(<a href="../core/Message.html" title="class in core">Message</a>&nbsp;m,
                          <a href="../core/DTNHost.html" title="class in core">DTNHost</a>&nbsp;from)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from class:&nbsp;<code><a href="../routing/MessageRouter.html#receiveMessage-core.Message-core.DTNHost-">MessageRouter</a></code></span></div>
<div class="block">Try to start receiving a message from another host.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="../routing/ActiveRouter.html#receiveMessage-core.Message-core.DTNHost-">receiveMessage</a></code>&nbsp;in class&nbsp;<code><a href="../routing/ActiveRouter.html" title="class in routing">ActiveRouter</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>m</code> - Message to put in the receiving buffer</dd>
<dd><code>from</code> - Who the message is from</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Value zero if the node accepted the message (RCV_OK), value less
 than zero if node rejected the message (e.g. DENIED_OLD), value bigger
 than zero if the other node should try later (e.g. TRY_LATER_BUSY).</dd>
</dl>
</li>
</ul>
<a name="messageTransferred-java.lang.String-core.DTNHost-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>messageTransferred</h4>
<pre>public&nbsp;<a href="../core/Message.html" title="class in core">Message</a>&nbsp;messageTransferred(java.lang.String&nbsp;id,
                                  <a href="../core/DTNHost.html" title="class in core">DTNHost</a>&nbsp;from)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from class:&nbsp;<code><a href="../routing/MessageRouter.html#messageTransferred-java.lang.String-core.DTNHost-">MessageRouter</a></code></span></div>
<div class="block">This method should be called (on the receiving host) after a message
 was successfully transferred. The transferred message is put to the
 message buffer unless this host is the final recipient of the message.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="../routing/ActiveRouter.html#messageTransferred-java.lang.String-core.DTNHost-">messageTransferred</a></code>&nbsp;in class&nbsp;<code><a href="../routing/ActiveRouter.html" title="class in routing">ActiveRouter</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>id</code> - Id of the transferred message</dd>
<dd><code>from</code> - Host the message was from (previous hop)</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The message that this host received</dd>
</dl>
</li>
</ul>
<a name="transferDone-core.Connection-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>transferDone</h4>
<pre>protected&nbsp;void&nbsp;transferDone(<a href="../core/Connection.html" title="class in core">Connection</a>&nbsp;con)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from class:&nbsp;<code><a href="../routing/ActiveRouter.html#transferDone-core.Connection-">ActiveRouter</a></code></span></div>
<div class="block">Method is called just before a transfer is finalized 
 at <a href="../routing/ActiveRouter.html#update--"><code>ActiveRouter.update()</code></a>.
 Subclasses that are interested of the event may want to override this.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="../routing/ActiveRouter.html#transferDone-core.Connection-">transferDone</a></code>&nbsp;in class&nbsp;<code><a href="../routing/ActiveRouter.html" title="class in routing">ActiveRouter</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>con</code> - The connection whose transfer was finalized</dd>
</dl>
</li>
</ul>
<a name="update--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>update</h4>
<pre>public&nbsp;void&nbsp;update()</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from class:&nbsp;<code><a href="../routing/ActiveRouter.html#update--">ActiveRouter</a></code></span></div>
<div class="block">Checks out all sending connections to finalize the ready ones 
 and abort those whose connection went down. Also drops messages
 whose TTL <= 0 (checking every one simulated minute).</div>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="../routing/ActiveRouter.html#update--">update</a></code>&nbsp;in class&nbsp;<code><a href="../routing/ActiveRouter.html" title="class in routing">ActiveRouter</a></code></dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../routing/ActiveRouter.html#addToSendingConnections-core.Connection-"><code>ActiveRouter.addToSendingConnections(Connection)</code></a></dd>
</dl>
</li>
</ul>
<a name="getDecisionEngine--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getDecisionEngine</h4>
<pre>public&nbsp;<a href="../routing/RoutingDecisionEngine.html" title="interface in routing">RoutingDecisionEngine</a>&nbsp;getDecisionEngine()</pre>
</li>
</ul>
<a name="shouldNotifyPeer-core.Connection-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>shouldNotifyPeer</h4>
<pre>protected&nbsp;boolean&nbsp;shouldNotifyPeer(<a href="../core/Connection.html" title="class in core">Connection</a>&nbsp;con)</pre>
</li>
</ul>
<a name="findConnectionsForNewMessage-core.Message-core.DTNHost-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>findConnectionsForNewMessage</h4>
<pre>protected&nbsp;void&nbsp;findConnectionsForNewMessage(<a href="../core/Message.html" title="class in core">Message</a>&nbsp;m,
                                            <a href="../core/DTNHost.html" title="class in core">DTNHost</a>&nbsp;from)</pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../deprecated-list.html">Deprecated</a></li>
<li><a href="../index-all.html">Index</a></li>
<li><a href="../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../routing/ActiveRouter.html" title="class in routing"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../routing/DirectDeliveryRouter.html" title="class in routing"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../index.html?routing/DecisionEngineRouter.html" target="_top">Frames</a></li>
<li><a href="DecisionEngineRouter.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
